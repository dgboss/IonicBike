<ion-view>
    <ion-nav-title>
        <img src="img/BikeMapsORG_Logo_notxt_sm.png" class="bma-header-logo">
        <span>Submit a new report</span>
    </ion-nav-title>
    <!--Hide the menu button-->
    <ion-nav-buttons side="right" >
    </ion-nav-buttons>

    <ion-content>
        <div class="padding incident-title">
            <span>What kind of report is this?</span>
        </div>

        <tabset class="bma-tabs">
            <tab heading="Incident">
                <form role="form" ng-submit="submitIncident($scope.incidentForm)" ng-controller="IncidentCtrl" name="incidentForm" id="incidentForm" novalidate>
                    <div class="padding">
                        <accordion close-others=false>
                            <accordion-group heading="Incident Details" is-open=true >
                                <div data-tap-disabled="true" class="form-group">
                                    <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.dateAlert]">
                                        When was the incident?*
                                    </label>
                                    <input type="text" style="background-color: #fff; border:1px solid #ddd; padding-left: 20px;" class="form-control incident-date" dgb-datepicker="{autoclose: true, showMeridian: true, endDate: incidentDetails.maxDate, maxView: 2}" ng-model="incidentDetails.selectedDateTime" readonly>
                                    </input>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.incidentTypeAlert]">
                                        What type of incident was it?*
                                    </label>
                                    <group-select
                                            header-text="Select an incident type"
                                            display-text="incidentDetails.selectedIncidentType.text"
                                            selected-item="incidentDetails.selectedIncidentType"
                                            groups="incidentDetails.incidentTypeChoices"
                                            >
                                    </group-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.incidentObjectAlert]">
                                        What sort of object did you collide with or nearly collide with?*
                                    </label>
                                    <group-select
                                            header-text="Select an object type"
                                            display-text="incidentDetails.selectedObjectType.text"
                                            selected-item="incidentDetails.selectedObjectType"
                                            groups="incidentDetails.incidentObjectChoices"
                                            >
                                    </group-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.incidentInjuryAlert]">
                                        Were you injured?*
                                    </label>
                                    <group-select
                                            header-text="Were you injured?"
                                            display-text="incidentDetails.selectedInjuryType.text"
                                            selected-item="incidentDetails.selectedInjuryType"
                                            groups="incidentDetails.incidentInjuryChoices"
                                            >
                                    </group-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        What was the purpose of your trip?
                                    </label>
                                    <basic-select
                                            header-text="What was the purpose of your trip?"
                                            display-text="incidentDetails.selectedPurposeType.text"
                                            selected-item="incidentDetails.selectedPurposeType"
                                            items="incidentDetails.incidentPurposeChoices"
                                            >
                                    </basic-select>
                                </div>
                            </accordion-group>
                            <accordion-group heading="Conditions">
                                <div class="form-group">
                                <label class="incident-label">
                                    What were the road conditions?
                                </label>
                                <basic-select
                                        header-text="What was the purpose of your trip?"
                                        display-text="conditions.selectedConditions.text"
                                        selected-item="conditions.selectedConditions"
                                        items="conditions.incidentConditionsChoices"
                                        >
                                </basic-select>
                            </div>
                                <div class="form-group">
                                <label class="incident-label">
                                    How were the sight lines?
                                </label>
                                <basic-select
                                        header-text="How were the sight lines?"
                                        display-text="conditions.selectSightConditions.text"
                                        selected-item="conditions.selectSightConditions"
                                        items="conditions.sightConditionsChoices"
                                        >
                                </basic-select>
                            </div>
                            <div class="form-group">
                                <label class="incident-label">
                                    Were there cars parked on the roadside?
                                </label>
                                <basic-select
                                        header-text="Were there cars parked on the roadside?"
                                        display-text="conditions.selectedCarsParked.text"
                                        selected-item="conditions.selectedCarsParked"
                                        items="conditions.carsParkedChoices"
                                        >
                                </basic-select>
                            </div>
                            <div class="form-group">
                                <label class="incident-label">
                                    Where were you riding your bike?
                                </label>
                                <group-select
                                        header-text="Where were you riding your bike?"
                                        display-text="conditions.selectedRidingOn.text"
                                        selected-item="conditions.selectedRidingOn"
                                        groups="conditions.ridingOnChoices"
                                        >
                                </group-select>
                            </div>
                            <div class="form-group">
                                <label class="incident-label">
                                    Were you using bike lights?
                                </label>
                                <basic-select
                                        header-text="Were you using bike lights?"
                                        display-text="conditions.selectedLight.text"
                                        selected-item="conditions.selectedLight"
                                        items="conditions.lightChoices"
                                        >
                                </basic-select>
                            </div>
                            <div class="form-group">
                                <label class="incident-label">
                                    What was the terrain like?
                                </label>
                                <basic-select
                                        header-text="What was the terrain like?"
                                        display-text="conditions.selectedTerrain.text"
                                        selected-item="conditions.selectedTerrain"
                                        items="conditions.terrainChoices"
                                        >
                                </basic-select>
                            </div>
                            <div class="form-group">
                                <label class="incident-label">
                                    What direction were you heading?
                                </label>
                                <basic-select
                                        header-text="What direction were you heading?"
                                        display-text="conditions.selectedDirection.text"
                                        selected-item="conditions.selectedDirection"
                                        items="conditions.directionChoices"
                                        >
                                </basic-select>
                            </div>
                            <div class="form-group">
                                <label class="incident-label">
                                    How were you moving?
                                </label>
                                <basic-select
                                        header-text="How were you moving?"
                                        display-text="conditions.selectedTurning.text"
                                        selected-item="conditions.selectedTurning"
                                        items="conditions.turningChoices"
                                        >
                                </basic-select>
                            </div>
                            </accordion-group>
                            <accordion-group heading="Description">
                                <div class="form-group">
                                    <label class="incident-label">
                                        Please give a brief description of the incident.
                                    </label>
                                    <textarea class="item incident-textarea" placeholder="optional" ng-model="description.details"></textarea>
                                </div>
                            </accordion-group>
                            <accordion-group heading="Personal Details">
                                <div class="form-group">
                                    <label class="incident-label">
                                        What is your birth year?
                                    </label>
                                    <basic-select
                                            header-text="Select a year"
                                            display-text="personalDetails.selectedIncidentBirthYear.text"
                                            selected-item="personalDetails.selectedIncidentBirthYear"
                                            items="personalDetails.birthYearChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        What is your birth month?
                                    </label>
                                    <basic-select
                                            header-text="Select a month"
                                            display-text="personalDetails.selectedIncidentBirthMonth.text"
                                            selected-item="personalDetails.selectedIncidentBirthMonth"
                                            items="personalDetails.birthMonthChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        Please select your gender?
                                    </label>
                                    <basic-select
                                            header-text="Select a gender"
                                            display-text="personalDetails.selectedIncidentGender.text"
                                            selected-item="personalDetails.selectedIncidentGender"
                                            items="personalDetails.genderChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        Do you bike at least once a week?
                                    </label>
                                    <basic-select
                                            header-text="Select an option"
                                            display-text="personalDetails.selectedIncidentCyclingFrequency.text"
                                            selected-item="personalDetails.selectedIncidentCyclingFrequency"
                                            items="personalDetails.cyclingFrequencyChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        Were you wearing a helmet?
                                    </label>
                                    <basic-select
                                            header-text="Select an option"
                                            display-text="personalDetails.selectedHelmet.text"
                                            selected-item="personalDetails.selectedHelmet"
                                            items="personalDetails.helmetChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        Were you intoxicated?
                                    </label>
                                    <basic-select
                                            header-text="Select an option"
                                            display-text="personalDetails.selectedIntoxicated.text"
                                            selected-item="personalDetails.selectedIntoxicated"
                                            items="personalDetails.intoxicatedChoices"
                                            >
                                    </basic-select>
                                </div>
                            </accordion-group>
                        </accordion>
                    </div>

                    <div class="padding" ng-click="markCheckbox()" ng-controller='TermsAndConditionsCtrl'>
                        <input type="checkbox" class="bma-checkbox" ng-model="model.incidentChecked" ng-click="markCheckbox()" ng-change="rememberCheck()"/>
                <span>I have read and understand the
                    <a ng-click="openModal()">
                        terms and conditions.
                    </a>
                </span>
                    </div>
                    <div class="padding text-right">
                        <button type="reset" class="button button-bikemaps-inverse" ng-click="cancelIncident()">
                            Cancel
                        </button>
                        <button type="submit" class="button button-bikemaps" ng-disabled="!model.incidentChecked">
                            Submit
                        </button>
                    </div>
                </form>
            </tab>
            <tab heading="Hazard">
                <form role="form" ng-submit="submitHazard($scope.hazardForm)" ng-controller="HazardCtrl" name="hazardForm" id="hazardForm" novalidate>
                    <div class="padding">
                        <accordion close-others=false>
                            <accordion-group heading="Hazard Details" is-open=true >
                                <div id="div_id_date" data-tap-disabled="true" class="form-group">
                                    <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.dateAlert]" for="div_id_date">
                                        When was the incident?*
                                    </label>
                                    <input type="text" style="background-color: #fff; border:1px solid #ddd; padding-left: 20px;" class="form-control incident-date" dgb-datepicker="{autoclose: true, showMeridian: true, endDate: hazardDetails.maxDate, maxView: 2}" ng-model="hazardDetails.selectedDateTime" readonly>
                                    </input>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.hazardTypeAlert]">
                                        What type of hazard was it?*
                                    </label>
                                    <group-select
                                            header-text="Select a hazard type"
                                            display-text="hazardDetails.selectedHazardType.text"
                                            selected-item="hazardDetails.selectedHazardType"
                                            groups="hazardDetails.hazardGroupChoices"
                                            >
                                    </group-select>
                                </div>
                            </accordion-group>
                            <accordion-group heading="Description">
                                <div class="form-group">
                                    <label class="incident-label">
                                        Please give a brief description of the incident.
                                    </label>
                                    <textarea class="item incident-textarea" placeholder="optional" ng-model="description.details"></textarea>
                                </div>
                            </accordion-group>
                            <accordion-group heading="Personal Details">
                                <div class="form-group">
                                    <label class="incident-label">
                                        What is your birth year?
                                    </label>
                                    <basic-select
                                            header-text="Select a year"
                                            display-text="personalDetails.selectedHazardBirthYear.text"
                                            selected-item="personalDetails.selectedHazardBirthYear"
                                            items="personalDetails.birthYearChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        What is your birth month?
                                    </label>
                                    <basic-select
                                            header-text="Select a month"
                                            display-text="personalDetails.selectedHazardBirthMonth.text"
                                            selected-item="personalDetails.selectedHazardBirthMonth"
                                            items="personalDetails.birthMonthChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        Please select your gender?
                                    </label>
                                    <basic-select
                                            header-text="Select a gender"
                                            display-text="personalDetails.selectedHazardGender.text"
                                            selected-item="personalDetails.selectedHazardGender"
                                            items="personalDetails.genderChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        Do you bike at least once a week?
                                    </label>
                                    <basic-select
                                            header-text="Select an option"
                                            display-text="personalDetails.selectedHazardCyclingFrequency.text"
                                            selected-item="personalDetails.selectedHazardCyclingFrequency"
                                            items="personalDetails.cyclingFrequencyChoices"
                                            >
                                    </basic-select>
                                </div>
                            </accordion-group>
                        </accordion>
                    </div>

                    <div class="padding" ng-click="markCheckbox()" ng-controller='TermsAndConditionsCtrl'>
                        <input type="checkbox" class="bma-checkbox" ng-model="model.hazardChecked" ng-click="markCheckbox()" ng-change="rememberCheck()"/>
                    <span>I have read and understand the
                        <a ng-click="openModal()">
                            terms and conditions.
                        </a>
                    </span>
                    </div>
                    <div class="padding text-right">
                        <button type="reset" class="button button-bikemaps-inverse" ng-click="cancelHazard()">
                            Cancel
                        </button>
                        <button type="submit" class="button button-bikemaps" ng-disabled="!model.hazardChecked">
                            Submit
                        </button>
                    </div>
                </form>
            </tab>
            <tab heading="Theft">
                <form role="form" ng-submit="submitTheft($scope.theftForm)" ng-controller="TheftCtrl" name="theftForm" id="theftForm" novalidate>
                    <div class="padding">
                        <accordion close-others=false>
                            <accordion-group heading="Theft Details" is-open=true >
                                <div data-tap-disabled="true" class="form-group">
                                    <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.dateAlert]" >
                                        When was the incident?*
                                    </label>
                                    <input type="text" style="background-color: #fff; border:1px solid #ddd; padding-left: 20px;" class="form-control incident-date" dgb-datepicker="{autoclose: true, showMeridian: true, endDate: theftDetails.maxDate, maxView: 2}" ng-model="theftDetails.selectedDateTime" readonly >
                                    </input>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.theftChoiceAlert]">
                                        What was stolen?*
                                    </label>
                                    <basic-select
                                            header-text="Select an option"
                                            display-text="theftDetails.selectedTheftChoice.text"
                                            selected-item="theftDetails.selectedTheftChoice"
                                            items="theftDetails.theftChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.theftLockedAlert]">
                                        Did you have your bike locked?*
                                    </label>
                                    <group-select
                                            header-text="Select an option"
                                            display-text="theftDetails.selectedLockedChoice.text"
                                            selected-item="theftDetails.selectedLockedChoice"
                                            groups="theftDetails.lockedChoices"
                                            >
                                    </group-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.theftLockTypeAlert]">
                                        What kind of lock were you using?*
                                    </label>
                                <basic-select
                                        header-text="Select an option"
                                        display-text="theftDetails.selectedLockTypeChoice.text"
                                        selected-item="theftDetails.selectedLockTypeChoice"
                                        items="theftDetails.lockTypeChoices"
                                        >
                                </basic-select>
                            </div>
                            <div class="form-group">
                                <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.theftLocationAlert]">
                                    Where did you leave your bike?*
                                </label>
                                <basic-select
                                        header-text="Select an option"
                                        display-text="theftDetails.selectedLocationChoice.text"
                                        selected-item="theftDetails.selectedLocationChoice"
                                        items="theftDetails.locationChoices"
                                        >
                                </basic-select>
                            </div>
                            <div class="form-group">
                                <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.theftLightingAlert]">
                                    Which describes the lighting conditions where and when the theft occurred?*
                                </label>
                                <basic-select
                                        header-text="Select an option"
                                        display-text="theftDetails.selectedLightingChoice.text"
                                        selected-item="theftDetails.selectedLightingChoice"
                                        items="theftDetails.lightingChoices"
                                        >
                                </basic-select>
                            </div>
                            <div class="form-group">
                                <label class="incident-label" ng-class="{true: 'form-invalid', false: 'form-valid'}[model.theftTrafficAlert]">
                                    What best describes the traffic in the area where the theft occurred?*
                                </label>
                                <basic-select
                                        header-text="Select an option"
                                        display-text="theftDetails.selectedTrafficChoice.text"
                                        selected-item="theftDetails.selectedTrafficChoice"
                                        items="theftDetails.trafficChoices"
                                        >
                                </basic-select>
                            </div>
                            </accordion-group>
                            <accordion-group heading="Description">
                                <div class="form-group">
                                    <label class="incident-label">
                                        Please give a brief description of the incident.
                                    </label>
                                    <textarea class="item incident-textarea" placeholder="optional" ng-model="theftDescription.details"></textarea>
                                </div>
                            </accordion-group>
                            <accordion-group heading="Personal Details">
                                <div class="form-group">
                                    <label class="incident-label">
                                        Do you bike at least once a week?
                                    </label>
                                    <basic-select
                                            header-text="Select an option"
                                            display-text="personalDetails.selectedHazardCyclingFrequency.text"
                                            selected-item="personalDetails.selectedHazardCyclingFrequency"
                                            items="personalDetails.cyclingFrequencyChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        Did you file a report with the police?
                                    </label>
                                    <basic-select
                                            header-text="Select an option"
                                            display-text="personalDetails.selectedPoliceReportChoice.text"
                                            selected-item="personalDetails.selectedPoliceReportChoice"
                                            items="personalDetails.policeReportChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        If you filed a police report, what is the report number?
                                    </label>
                                    <input type="text" style="height:56px;width:100%;border:1px solid #ddd; padding-left: 20px;" maxlength="100" ng-model="personalDetails.policeReportNumber" />
                                </div>

                                <div class="form-group">
                                    <label class="incident-label">
                                        Did you file an insurance claim?
                                    </label>
                                    <basic-select
                                            header-text="Select an option"
                                            display-text="personalDetails.selectedInsuranceClaimChoice.text"
                                            selected-item="personalDetails.selectedInsuranceClaimChoice"
                                            items="personalDetails.insuranceClaimChoices"
                                            >
                                    </basic-select>
                                </div>
                                <div class="form-group">
                                    <label class="incident-label">
                                        If you filed an insurance claim, what is the claim number?
                                    </label>
                                    <input type="text" style="height:56px;width:100%;border:1px solid #ddd; padding-left: 20px;" maxlength="100" ng-model="personalDetails.insuranceClaimNumber" />
                                </div>
                            </accordion-group>
                        </accordion>
                    </div>

                    <div class="padding" ng-click="markCheckbox()" ng-controller='TermsAndConditionsCtrl'>
                        <input type="checkbox" class="bma-checkbox" ng-model="model.theftChecked" ng-click="markCheckbox()" ng-change="rememberCheck()"/>
                <span>I have read and understand the
                    <a ng-click="openModal()">
                        terms and conditions.
                    </a>
                </span>
                    </div>
                    <div class="padding text-right">
                        <button type="reset" class="button button-bikemaps-inverse" ng-click="cancelTheft()">
                            Cancel
                        </button>
                        <button type="submit" class="button button-bikemaps" ng-disabled="!model.theftChecked">
                            Submit
                        </button>
                    </div>
                </form>
            </tab>
        </tabset>
    </ion-content>